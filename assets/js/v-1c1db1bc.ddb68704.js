"use strict";(self.webpackChunkreicalg=self.webpackChunkreicalg||[]).push([[566],{1432:(l,i,a)=>{a.r(i),a.d(i,{data:()=>n});const n={key:"v-1c1db1bc",path:"/penetration/4.html",title:"暗月项目四（完整渗透测试）",lang:"zh-CN",frontmatter:{date:"2023/7/1 19:57",stick:!1,keyword:"misc,ctfshow",description:"渗透测试",title:"暗月项目四（完整渗透测试）",tag:["渗透测试"],categories:["渗透测试","提权","网站"]},excerpt:"",headers:[{level:3,title:"项目四（完整渗透测试）",slug:"项目四-完整渗透测试",children:[]},{level:2,title:"主机扫描",slug:"主机扫描",children:[{level:3,title:"(1)nmap-sn",slug:"_1-nmap-sn",children:[]},{level:3,title:"(2)netdiscover -i",slug:"_2-netdiscover-i",children:[]}]},{level:2,title:"端口扫描",slug:"端口扫描",children:[]},{level:2,title:"改dns服务器地址",slug:"改dns服务器地址",children:[]},{level:2,title:"wfuzz爆破子域名",slug:"wfuzz爆破子域名",children:[]},{level:2,title:"第一个网站的渗透（new.）",slug:"第一个网站的渗透-new",children:[]},{level:2,title:"第二个域名渗透（ww2）",slug:"第二个域名渗透-ww2",children:[{level:3,title:"gobuster 目录扫描",slug:"gobuster-目录扫描",children:[]},{level:3,title:"sql注入漏洞",slug:"sql注入漏洞",children:[]}]}],git:{}}},1099:(l,i,a)=>{a.r(i),a.d(i,{default:()=>Jl});var n=a(6252);const o=(0,n.uE)('<h3 id="项目四-完整渗透测试" tabindex="-1"><a class="header-anchor" href="#项目四-完整渗透测试" aria-hidden="true">#</a> 项目四（完整渗透测试）</h3><h2 id="主机扫描" tabindex="-1"><a class="header-anchor" href="#主机扫描" aria-hidden="true">#</a> 主机扫描</h2><h3 id="_1-nmap-sn" tabindex="-1"><a class="header-anchor" href="#_1-nmap-sn" aria-hidden="true">#</a> (1)nmap-sn</h3>',3),r=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230611205450303",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306112054777.png",data:"aurora"})],-1),g=(0,n._)("h3",{id:"_2-netdiscover-i",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#_2-netdiscover-i","aria-hidden":"true"},"#"),(0,n.Uk)(" (2)netdiscover -i")],-1),t=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230611205651833",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306112056939.png",data:"aurora"})],-1),c=(0,n._)("h2",{id:"端口扫描",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#端口扫描","aria-hidden":"true"},"#"),(0,n.Uk)(" 端口扫描")],-1),e=(0,n._)("p",null,"首先用masscan扫描",-1),s=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230611210309546",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306112103816.png",data:"aurora"})],-1),p=(0,n._)("p",null,"然后再用nmap进行端口探测",-1),u=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230612150949554",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306121509909.png",data:"aurora"})],-1),m=(0,n._)("p",null,"通过对端口的解析，可以看每个端口对应的服务",-1),d=(0,n._)("h2",{id:"改dns服务器地址",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#改dns服务器地址","aria-hidden":"true"},"#"),(0,n.Uk)(" 改dns服务器地址")],-1),h=(0,n._)("p",null,"发现是由dns53 端口开启的，靶机应该是有dns服务的，所以要先把dns服务器改成靶机地址",-1),_=(0,n._)("p",null,"（1）Windows",-1),b=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230612154425537",originSrc:"C:/Users/23167/AppData/Roaming/Typora/typora-user-images/image-20230612154425537.png",data:"aurora"})],-1),z=(0,n._)("p",null,"（2）kali",-1),f=(0,n._)("p",null,"/etc/resolv.conf",-1),y=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230612160048638",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306121600839.png",data:"aurora"})],-1),j=(0,n._)("h2",{id:"wfuzz爆破子域名",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#wfuzz爆破子域名","aria-hidden":"true"},"#"),(0,n.Uk)(" wfuzz爆破子域名")],-1),v=(0,n.Uk)("wfuzz学习地址"),w={href:"https://blog.csdn.net/qq_45869039/article/details/108874749",target:"_blank",rel:"noopener noreferrer"},k=(0,n.Uk)("wfuzz学习_wfuzz参数_"),S=(0,n._)("p",null,"/usr/share/amass/wordlists/subdomains-top1mil-110000.txt kali自带的子域名爆破字典",-1),q=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230612160330695",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306121603759.png",data:"aurora"})],-1),x=(0,n._)("p",null,"new www ww2 WWW",-1),U=(0,n._)("h2",{id:"第一个网站的渗透-new",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#第一个网站的渗透-new","aria-hidden":"true"},"#"),(0,n.Uk)(" 第一个网站的渗透（new.）")],-1),W=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230625095057736",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306250951130.png",data:"aurora"})],-1),C=(0,n._)("p",null,"是一个dedecms类型网站",-1),D=(0,n._)("p",null,"一般dedecms是有固定的目录结构的，那么根据目录结构能访问到其他页面",-1),X=(0,n._)("p",null,"如果像我这种小白不了解dedecms的话，可以先扫描一遍该网站的目录结构",-1),A=(0,n.Uk)("用[dirbuster]("),E={href:"https://blog.csdn.net/Mr_Wanderer/article/details/107410457",target:"_blank",rel:"noopener noreferrer"},M=(0,n.Uk)("(54条消息) Web渗透之信息收集——目录扫描从御剑到Dirbuster_Mr. Wanderer的博客-CSDN博客"),N=(0,n.Uk)(")先扫描一边网站目录 用御剑效果差不多，看在本机还是kali里完成实验了"),H=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230625100119420",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306251001538.png",data:"aurora"})],-1),I=(0,n._)("p",null,"查看dedecms版本号，网上找对应的exp，",-1),L=(0,n._)("p",null,"版本号的相对路径：/data/admin/ver.txt",-1),P=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230625100820990",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306251008176.png",data:"aurora"})],-1),R=(0,n.Uk)("20150618是存在漏洞的 "),T={href:"http://www.hekaiyu.cn/hacker/3060.html",target:"_blank",rel:"noopener noreferrer"},Y=(0,n.Uk)("Dedecms 20150618 注入漏洞"),Z=(0,n._)("p",null,"根据文章实现exp",-1),B=(0,n._)("p",null,"member模块开启，可以注册登录",-1),F=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230625101514441",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306251015609.png",data:"aurora"})],-1),G=(0,n._)("p",null,"先注册一个账号",-1),J=(0,n._)("p",null,[(0,n.Uk)("增加一个分类"),(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230625171115401",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306251711750.png",data:"aurora"})],-1),K=(0,n._)("p",null,"利用给的exp能跑出admin账号的密码md5值",-1),O=(0,n._)("p",null,"该exp需要获取一个登录账号的cookie（requests包中） 需要在python2环境下运行",-1),Q=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230625171131658",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306251711785.png",data:"aurora"})],-1),V=(0,n._)("p",null,"获得admin账号密码进行登录",-1),$=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230625171627055",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202306251716192.png",data:"aurora"})],-1),ll=(0,n._)("p",null,"获取权限后上传小马",-1),il=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230706171558794",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307061716006.png",data:"aurora"})],-1),al=(0,n._)("p",null,"拿蚁剑连后上传大马（ASPXSpy2014.aspx admin）查看是否可执行cmd文件，然后开始提权",-1),nl=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230724110742886",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307241107956.png",data:"aurora"})],-1),ol=(0,n._)("p",null,"生成攻击载荷",-1),rl=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230724104346468",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307241043543.png",data:"aurora"})],-1),gl=(0,n._)("p",null,"查看服务器可写目录，然后上传攻击载荷",-1),tl=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230724104545057",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307241045107.png",data:"aurora"})],-1),cl=(0,n._)("p",null,"反弹shell",-1),el=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230724111207836",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307241112877.png",data:"aurora"})],-1),sl=(0,n._)("p",null,"有关msfconsole的使用可以重开一篇",-1),pl=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230724145454737",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307241454779.png",data:"aurora"})],-1),ul=(0,n._)("p",null,"监听后连上",-1),ml=(0,n._)("p",null,"然后提权 首先用use post/multi/recon/local_exploit_suggester跑一边可以利用的exp",-1),dl=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230725220840944",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307252208247.png",data:"aurora"})],-1),hl=(0,n._)("p",null,"跑完以后就看模块利用 不会使用模块可以百度一下",-1),_l=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230725221029006",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307252210072.png",data:"aurora"})],-1),bl=(0,n._)("p",null,"提成功了获得系统权限",-1),zl=(0,n._)("p",null,[(0,n.Uk)("然后找flag 可以先在meterpreter下先 "),(0,n._)("code",null,"search -f *flag*")],-1),fl=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230726103234108",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307261032479.png",data:"aurora"})],-1),yl=(0,n._)("p",null,"然后再进入shell 查看内容（玄学卡实在不行重新弹一个shell回来）",-1),jl=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230726103315356",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307261033400.png",data:"aurora"})],-1),vl=(0,n._)("h2",{id:"第二个域名渗透-ww2",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#第二个域名渗透-ww2","aria-hidden":"true"},"#"),(0,n.Uk)(" 第二个域名渗透（ww2）")],-1),wl=(0,n._)("h3",{id:"gobuster-目录扫描",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#gobuster-目录扫描","aria-hidden":"true"},"#"),(0,n.Uk)(" gobuster 目录扫描")],-1),kl=(0,n._)("p",null,"感觉和dirbuster效果差也差不多， 具体操作 相对可以",-1),Sl=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230731100905532",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307311009701.png",data:"aurora"})],-1),ql=(0,n._)("p",null,"比dirbuster功能相对多一点，能扫dns，fuzz，tftp？ 我感觉需要一个相对清楚的目录结构，dirbuster可能会更适合一点，如果是查看该网站有什么特定类型文件，那就gobuster，当然功能性上也是gobuster nice",-1),xl=(0,n._)("p",null,'gobuster dir -u http://ww2.cc123.com -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x "aspx,html" -o ww2dir',-1),Ul=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230731101327317",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307311013387.png",data:"aurora"})],-1),Wl=(0,n._)("p",null,"扫完简单看一下有哪些aspx和html，html占据较大部分，有一些aspx可以实现动态交互，然后找漏洞",-1),Cl=(0,n._)("h3",{id:"sql注入漏洞",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#sql注入漏洞","aria-hidden":"true"},"#"),(0,n.Uk)(" sql注入漏洞")],-1),Dl=(0,n._)("p",null,"老的静态网站， sql语言 select * from ### username=‘ ’ and password = ‘#####’",-1),Xl=(0,n._)("p",null,"存在注入select * from ### username=‘ xxxx - - ’ and password = ‘#####’",-1),Al=(0,n._)("p",null,"注释掉后面的代码，从而绕过",-1),El=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230731153300162",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307311533391.png",data:"aurora"})],-1),Ml=(0,n._)("p",null,"message.aspx存在xss漏洞",-1),Nl=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230731154125653",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307311541727.png",data:"aurora"})],-1),Hl=(0,n._)("p",null,"这个留言留到admin管理系统中",-1),Il=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230731154322534",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307311543608.png",data:"aurora"})],-1),Ll=(0,n.Uk)("附一条xss常见攻击脚本"),Pl={href:"https://www.jianshu.com/p/36b3578a6629",target:"_blank",rel:"noopener noreferrer"},Rl=(0,n.Uk)("XSS攻击常识及常见的XSS攻击脚本汇总"),Tl=(0,n.Uk)(" 和笼统危害"),Yl={href:"https://zhuanlan.zhihu.com/p/353097872",target:"_blank",rel:"noopener noreferrer"},Zl=(0,n.Uk)("XSS漏洞及利用"),Bl=(0,n._)("p",null,"本地是搭建了xsstool利用工具的 admin 1234567",-1),Fl=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"image-20230731173313399",originSrc:"https://blog-1318287398.cos.ap-nanjing.myqcloud.com/img/202307311733681.png",data:"aurora"})],-1),Gl={},Jl=(0,a(3744).Z)(Gl,[["render",function(l,i){const a=(0,n.up)("ExternalLinkIcon");return(0,n.wg)(),(0,n.iD)(n.HY,null,[o,r,g,t,c,e,s,p,u,m,d,h,_,b,z,f,y,j,(0,n._)("p",null,[v,(0,n._)("a",w,[k,(0,n.Wm)(a)])]),S,q,x,U,W,C,D,X,(0,n._)("p",null,[A,(0,n._)("a",E,[M,(0,n.Wm)(a)]),N]),H,I,L,P,(0,n._)("p",null,[R,(0,n._)("a",T,[Y,(0,n.Wm)(a)])]),Z,B,F,G,J,K,O,Q,V,$,ll,il,al,nl,ol,rl,gl,tl,cl,el,sl,pl,ul,ml,dl,hl,_l,bl,zl,fl,yl,jl,vl,wl,kl,Sl,ql,xl,Ul,Wl,Cl,Dl,Xl,Al,El,Ml,Nl,Hl,Il,(0,n._)("p",null,[Ll,(0,n._)("a",Pl,[Rl,(0,n.Wm)(a)]),Tl,(0,n._)("a",Yl,[Zl,(0,n.Wm)(a)])]),Bl,Fl],64)}]])}}]);